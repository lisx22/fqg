seajs.use(["~slider@2","~box@1","~timer@1","~lazyload@1","~roll@1","~pagelet@1.x","~url@1","~cookie@1"],function(e,o,n,t,a,r,i,s){var l="fn-hide",d="hide",c="js-lastest-goods",f=0,u=0,g=0,h=0,m=-1,v=null,p={renderTopBanner:function(){new e({autoStart:"true",container:"#top_banner",bannerHeight:"440",interval:5e3})},renderAModelBanner:function(){for(var o=0;u>o;o++){new e({autoStart:"false",container:".js-a-model-banner-"+o,isArrowAlwaysShow:"true",bannerWidth:"480",bannerHeight:"250"})}},renderBModelBanner:function(){for(var o=1;g>=o;o++){new e({autoStart:"false",container:".js-b-model-banner-"+o,isArrowAlwaysShow:"true",bannerWidth:"720",bannerHeight:"250"})}},renderRoll:function(){var e=new a({selector:"#roll_news",itemHeight:22,viewCount:4});e.start()},renderSnow:function(){seajs.use(["module/effect/snow"],function(e){e.init({classNamePrefix:"i-cd-",classCount:7,margin:20})})},renderLastestGoods:function(){var e=$("."+c);e.find("img[data-original]").lazyload({effect:"fadeIn"}),e.removeClass(c)},goToFloor:function(e){var o=$(".js-floor-"+e).length;return o>0?($(".js-floor-"+e).get(0).scrollIntoView(!0),h=0,!0):!1},preRenderBModel:function(){var e=g;g=$(".js-floor").size(),this.renderBModelBanner(e+1,g)},setupFloorsWidget:function(){var e=this,o=$("#category_widget"),n=o.data("text-class"),t=o.data("icon-class"),a="on",r=!$.support.leadingWhitespace,i="scrollIntoView"in document.createElement("div")&&!r;$(".js-floor-toggle").parent().on("click",".js-floor-toggle",function(o){if(i){o.preventDefault();var n=$(this),t=n.data("floor");if(h=t,e.goToFloor(t))return!1;g>0&&t>=m?$("#b_model_virtual").get(0).scrollIntoView(!0):$("#b_model").get(0).scrollIntoView(!0)}});var s=function(e){e.length&&e.removeClass(e.data("icon-class")).addClass(e.data("text-class")).removeClass(t).addClass(n).text(e.data("text"))},l=function(e){e.length&&e.removeClass(e.data("text-class")).addClass(e.data("icon-class")).removeClass(n).addClass(t).text("")},c=function(e){var o=$(".js-floor-toggle-"+e),n=$(".js-floor-toggle").parent().siblings("."+a).find(".js-floor-toggle");o.is(n)||(o.parent().is("."+a)||(s(o),o.parent().addClass(a)),n.length&&(l(n),n.parent().removeClass(a)))};$(".js-floor-toggle").each(function(){$(this).parent().hover(function(){var e=$(this);if(!e.is("."+a)){var o=e.find(".js-floor-toggle");s(o)}},function(){var e=$(this);if(!e.is("."+a)){var o=$(this).find(".js-floor-toggle");l(o)}})});var f=($("body"),o.height()),u=$("#header_banner").height()||0,v=$("#common_banner_top").height()||0,p=v+u+620,_=v+u+1788,w=555,b=532,j=$.map(G_CATEGORY_WIDGET,function(e,o){return _+w*o});$(window).on("scroll",function(){for(var e=document.documentElement.scrollTop||document.body.scrollTop,n=G_CATEGORY_WIDGET.length+1,t=!1,a=n;a>=1;a--)if(e+16+w/2>j[a-1]){c(a),t=!0;break}if(t||c(1),!r){var i=$(window).height(),s=0,l=p-e+16,u=Math.floor((i-f)/2);s=u>l?u:l,e+s+f>j[n-1]+b+f/3||s+f>i?o.addClass(d):(o.css("bottom",i-f-s),o.removeClass(d))}}),r&&o.css("bottom",Math.floor(($(window).height()-f)/2)).removeClass(d),setTimeout(function(){$(window).trigger("scroll")},0)},resetSize:function(e){e.css("height","auto")},modelBRender:function(e){g=$(".js-floor").size(),this.preRenderBModel(),this.renderLastestGoods(),this.resetSize(e),h>0&&this.goToFloor(h)},bindLazyload:function(e){$(e).find(".js-lazyload[data-original]").lazyload({effect:"fadeIn"})},bindEvent:function(){var e=this,o="#limit_sale",n="#a_model",t="#b_model",a="#b_model_virtual",r="#c_model",i=$("#btn_fb_top");$(o).on("pagelet-lazyload-onload",function(){v=$("#switch_limit_list"),e.renderLastestGoods(),e.resetSize($(this)),v.on("click",".js-limit-sku",function(){s.set("event_id",$(this).data("event-id-name"),"fenqile.com","/",10080)})}),$(n).on("pagelet-lazyload-onload",function(){u=$(".js-a-model").size(),e.renderAModelBanner(),e.renderLastestGoods(),e.resetSize($(this))}),$(t).on("pagelet-lazyload-onload",function(){e.modelBRender($(this))}),$(a).on("pagelet-lazyload-onload",function(){var o=$(this);m=o.find(".js-floor").first().data("floor"),e.modelBRender(o)}),$(r).on("pagelet-lazyload-onload",function(){e.bindLazyload(r),e.resetSize($(this))}),$(r).on("click","#next_group_btn",function(){var o=$(".js-next-group");o.addClass(l);var n=o.size();f++,f==n&&(f=0),o.eq(f).removeClass(l),e.bindLazyload(r)}),i.on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"fast")})},renderView:function(){this.renderRoll(),this.renderTopBanner(),this.setupFloorsWidget()},sendSpeed:function(){seajs.use(["~speed@1"],function(e){new e({domainId:16,pageId:1,timePoint:G_SPEED_POINT_TIME})})},bindError:function(){var e=FQL.ErrorLogger.getLogger("index");e.bindError("910120001")},initParams:function(){G_SPEED_POINT_TIME.LOGIC={ID:5,DATA:[G_PAGE_LOAD_TIME,(new Date).getTime()]},window.G_BOX=new o},init:function(){this.renderView(),this.initParams(),this.bindError(),this.bindEvent(),this.sendSpeed()}};p.init()});
//# sourceMappingURL=//www.fenqile.com/res/static/index/index.js.map