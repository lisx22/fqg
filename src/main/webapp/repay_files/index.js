seajs.use(["repayment","box","template"],function(e,t,n){var i=FQL.box,o=!1,a="fn-hide",r="ui-check";window.G_MV_SUC_CALLBACK=function(e){0==window.G_POCKET_STATUS?i.showMsg({icon:"i-ok",retmsg:"银行卡已验证，您距离开通乐卡只差一步",button:[{id:"cancel",value:"暂不开通",className:"btn-gray",display:!0,disabled:!1,handler:function(){window.location.reload()}},{id:"ok",value:"立即开通",className:"btn-ok",display:!0,disabled:!1,handler:function(){window.location.href="/order/info/100/active.html"}}]}):window.location.reload()},window.G_MV_FINAL_VERIFY_FAIL_CALLBACK=function(e){i.showError(e.retcode,e.retmsg)};var l={bindEvent:function(){$("#bill_title_wrap").on("click",".js-bill-title-item",function(){var e=$(this).index();$(this).siblings().removeClass("on"),$(this).addClass("on"),$("#bill_content_wrap").find(".js-bill-content").addClass(a).eq(e).removeClass(a)}),$(".js-repay").on("click",function(t){t.preventDefault();var n=$(this).data("id");e.repay(n)}),$(".js-delay").on("click",function(t){t.preventDefault();var n=$(this).data("id");e.delay_repay(n)}),$("#view_process").on("mouseover",function(e){$.post("/order/query_express.json","order_id="+$(this).data("order-id"),function(e){var t=e.retcode,o=e.retmsg;if(0==t){var a=n("tpl_process",{list:e.result_rows.reverse()});$("#view_process").off().tips({trigger:"hover",position:"right",content:a}).trigger("mouseover")}else i.showError(t,o)},"json",".js-null")}),$("#cancel_pocket_active").on("click",function(e){e.preventDefault();var t=$(this);t.attr("data-order-id"),t.attr("data-loading-text");return o?!0:void i.showIframe({title:"取消订单",width:"640",height:"303",url:"/order/cancel/"+$(this).attr("data-order-id")+".html",button:[]})}),i.on("hide",function(e){1==window.G_IS_REFRESH&&location.reload()}),$("#pocket_ad_close").on("click",function(e){e.preventDefault(),$("#pocket_ad_wrap").addClass(a)}),$("body").on("click",".js-cancel-btn",function(){var e=$(this).data("order-id");i.show({title:"撤销关单",width:520,height:300,content:$("#tmpl_cancel_close_order").html(),button:[{id:"ok",value:"确定",className:"",display:!0,disabled:!1,handler:function(){var t=this;$.get("/my/cancel_close.json","order_id="+e,function(e){0==e.retcode?window.location.reload():(t.hide(),i.showError(e.retcode,e.retmsg))})}},{id:"cancel",value:"取消",className:"btn-gray",display:!0,disabled:!1,handler:function(){this.hide()}}]})}),$("#go_money_verify").click(function(){i.showIframe({title:"验证银行卡",url:"/user/money_verify.html",width:750,height:310})}),$(".js-abnormal-bill, .js-amortize-bill").on("click",function(e){var t=$(this),n=parseFloat(t.find(".js-repay-amount").val()),i=t.data("encrypt-repay-id"),o=parseFloat($("#total_unpay_amount").text());t.hasClass(r)?(t.removeClass(r),o-=n,$("#total_unpay_amount").text(o.toFixed(2)),window.G_ENCRYPT_REPAY_ID=window.G_ENCRYPT_REPAY_ID.replace(new RegExp(i+",","g"),"")):(t.addClass(r),o+=n,$("#total_unpay_amount").text(o.toFixed(2)),window.G_ENCRYPT_REPAY_ID+=t.data("encrypt-repay-id")+",")}),$("#current_repay").on("click",function(e){return e.preventDefault(),""===window.G_ENCRYPT_REPAY_ID?(i.showMsg({title:"提示",icon:"i-warn",retmsg:"至少选择一个账单还款"}),!1):("undefined"==typeof window.G_ENCRYPT_REPAY_ID&&(window.G_ENCRYPT_REPAY_ID=""),void(window.location.href="/repay/current/payment.html?encrypt_repay_id="+window.G_ENCRYPT_REPAY_ID))}),$("#fq_repay").on("click",function(e){return FQL.stat.clickStat("AMORTIZE_REPAY"),e.preventDefault(),$(".js-abnormal-bill").hasClass(r)?(i.showMsg({title:"提示",icon:"i-warn",retmsg:"异常账单不支持分期还款"}),!1):""===window.G_ENCRYPT_REPAY_ID?(i.showMsg({title:"提示",icon:"i-warn",retmsg:"至少选择一个账单还款"}),!1):("undefined"==typeof window.G_ENCRYPT_REPAY_ID&&(window.G_ENCRYPT_REPAY_ID=""),void(window.location.href="/repay/fq/current/payment.html?encrypt_repay_id="+window.G_ENCRYPT_REPAY_ID))})},init:function(){this.bindEvent()}};l.init()});
//# sourceMappingURL=http://res.fenqile.com/res/static/my/index.js.map
